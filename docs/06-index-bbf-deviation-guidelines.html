<!DOCTYPE html>
<!-- BBF GitHub Pages pandoc template; modified from default.html template -->
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8"/>
  <meta name="generator" content="pandoc"/>
  <meta name="description" content="OD-360 – Broadband Forum YANG
Modules: A set of YANG modules for managing access networks"/>
  <meta name="theme-color" content="#157878"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/>
  <title>BBF – BBF Deviation Guidelines</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="github.css"/>
  <link rel="stylesheet" href="extra.css"/>
  <link rel="stylesheet" href="toc.css"/>
  <link rel="stylesheet" href="release.css"/>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <!-- XXX header includes are included just before the ToC (below) -->
</head>

<body>
  <section class="page-header">
    <h1 class="project-name">
      <a href="index.html" style="text-decoration: none; color: white;">
        <img src="bbflogo-reverse-dark.png"/><br>
        Broadband Forum YANG Modules
      </a>
    </h1>
    <h2 class="project-tagline">A set of YANG modules for managing
access networks</h2>
    <p></p>
    <p></p>
    <div class="project-buttons">
      <a class="btn" href="index.htm" title="OD-360 Single-file
HTML">HTML</a>
      <a class="btn" href="index.pdf" title="OD-360 PDF">PDF</a>
      <a class="btn" href="https://github.com/BroadbandForum/yang" title="YANG
modules on GitHub">YANG Modules</a>
    </div>
  </section>

  <section class="main-content">
<nav>
<p>
   <a href="00-index-contents.html#contents">Cover Page</a>
 | <a href="01-index-references.html#sec:references">References</a>
 | <a href="02-index-overview.html#sec:overview">Overview</a>
 | <a href="03-index-yang-guidelines.html#sec:yang-guidelines">YANG Guidelines</a>
 | <a href="04-index-ietf-yang-guidelines.html#sec:ietf-yang-guidelines">IETF YANG Guidelines</a>
 | <a href="05-index-bbf-yang-guidelines.html#sec:bbf-yang-guidelines">BBF YANG Guidelines</a>
 | <a href="06-index-bbf-deviation-guidelines.html#sec:bbf-deviation-guidelines">BBF Deviation Guidelines</a>
</p>
</nav>

<nav id="TOCFULL">
<ul>
  <li><a href="00-index-contents.html#contents">Cover Page</a></li>
  <li><a href="01-index-references.html#sec:references">References</a></li>
  <li><a href="02-index-overview.html#sec:overview">Overview</a></li>
  <ul>
    <li><a href="02-index-overview.html#sec:yang-language-version">YANG Language Version</a></li>
  </ul>
  <li><a href="03-index-yang-guidelines.html#sec:yang-guidelines">YANG Guidelines</a></li>
  <ul>
    <li><a href="03-index-yang-guidelines.html#sec:terminology">Terminology</a></li>
    <li><a href="03-index-yang-guidelines.html#sec:template">Template</a></li>
    <li><a href="04-index-ietf-yang-guidelines.html#sec:ietf-yang-guidelines">IETF YANG Guidelines</a></li>
    <ul>
      <li><a href="04-index-ietf-yang-guidelines.html#sec:ietf-1-yang-terms">IETF-1: YANG Terms</a></li>
      <li><a href="04-index-ietf-yang-guidelines.html#sec:ietf-2-yang-validation">IETF-2: YANG Validation</a></li>
      <li><a href="04-index-ietf-yang-guidelines.html#sec:ietf-3-yang-usage-guidelines">IETF-3: YANG Usage Guidelines</a></li>
      <li><a href="04-index-ietf-yang-guidelines.html#sec:ietf-4-file-layout">IETF-4: File Layout</a></li>
      <li><a href="04-index-ietf-yang-guidelines.html#sec:ietf-5-quoting">IETF-5: Quoting</a></li>
      <li><a href="04-index-ietf-yang-guidelines.html#sec:ietf-6-module-naming-conventions">IETF-6: Module Naming Conventions</a></li>
      <li><a href="04-index-ietf-yang-guidelines.html#sec:ietf-7-module-header-meta-and-revision-statements">IETF-7: Module Header, Meta and Revision Statements</a></li>
      <li><a href="04-index-ietf-yang-guidelines.html#sec:ietf-8-module-header-meta-and-revision-statements---top-level-description">IETF-8: Module Header, Meta and Revision Statements - Top Level Description</a></li>
      <li><a href="04-index-ietf-yang-guidelines.html#sec:ietf-9-namespace-assignments">IETF-9: Namespace Assignments</a></li>
      <li><a href="04-index-ietf-yang-guidelines.html#sec:ietf-10-prefixes---imported-modules">IETF-10: Prefixes - Imported Modules</a></li>
      <li><a href="04-index-ietf-yang-guidelines.html#sec:ietf-11-prefixes---usage">IETF-11: Prefixes - Usage</a></li>
      <li><a href="04-index-ietf-yang-guidelines.html#sec:ietf-12-identifier-naming-conventions">IETF-12: Identifier Naming Conventions</a></li>
      <li><a href="04-index-ietf-yang-guidelines.html#sec:ietf-13-conditional-statements">IETF-13: Conditional Statements</a></li>
      <li><a href="04-index-ietf-yang-guidelines.html#sec:ietf-14-conditional-augment-statements">IETF-14: Conditional Augment Statements</a></li>
      <li><a href="04-index-ietf-yang-guidelines.html#sec:ietf-15-import-or-include-by-revision">IETF-15: Import or Include By Revision</a></li>
      <li><a href="04-index-ietf-yang-guidelines.html#sec:ietf-16-legal-characters-in-yang-modules">IETF-16: Legal Characters in YANG Modules</a></li>
      <li><a href="04-index-ietf-yang-guidelines.html#sec:ietf-17-prefix-on-belongs-to-statements">IETF-17: Prefix on &ldquo;belongs-to&rdquo; Statements</a></li>
      <li><a href="04-index-ietf-yang-guidelines.html#sec:ietf-18-error-message-sub-statement-to-the-must-statement">IETF-18: &lsquo;error-message&rsquo; sub-statement to the &lsquo;must&rsquo; statement</a></li>
      <li><a href="04-index-ietf-yang-guidelines.html#sec:ietf-19-description-sub-statement-to-the-must-statement">IETF-19: &lsquo;description&rsquo; sub-statement to the &lsquo;must&rsquo; statement</a></li>
      <li><a href="04-index-ietf-yang-guidelines.html#sec:ietf-20-tabs-and-spacing">IETF-20: Tabs and Spacing</a></li>
    </ul>
    <li><a href="05-index-bbf-yang-guidelines.html#sec:bbf-yang-guidelines">BBF YANG Guidelines</a></li>
    <ul>
      <li><a href="05-index-bbf-yang-guidelines.html#sec:bbf-1-use-of-ianaietf-yang-modules">BBF-1: Use of IANA/IETF YANG Modules</a></li>
      <li><a href="05-index-bbf-yang-guidelines.html#sec:bbf-2-line-length">BBF-2: Line Length</a></li>
      <li><a href="05-index-bbf-yang-guidelines.html#sec:bbf-3-deviations">BBF-3: Deviations</a></li>
      <li><a href="05-index-bbf-yang-guidelines.html#sec:bbf-4-short-names">BBF-4: Short Names</a></li>
      <li><a href="05-index-bbf-yang-guidelines.html#sec:bbf-5-descriptions-and-references">BBF-5: Descriptions and References</a></li>
      <li><a href="05-index-bbf-yang-guidelines.html#sec:bbf-6-special-values">BBF-6: Special Values</a></li>
      <li><a href="05-index-bbf-yang-guidelines.html#sec:bbf-7-paragraph-separation-in-description-statements">BBF-7: Paragraph Separation in Description Statements</a></li>
      <li><a href="05-index-bbf-yang-guidelines.html#sec:bbf-8-revision-statements">BBF-8: Revision Statements</a></li>
      <li><a href="05-index-bbf-yang-guidelines.html#sec:bbf-9-explicit-modeling">BBF-9: Explicit Modeling</a></li>
      <li><a href="05-index-bbf-yang-guidelines.html#sec:bbf-10-retroactive-application-of-od-360-guidelines">BBF-10: Retroactive Application of OD-360 Guidelines</a></li>
      <li><a href="05-index-bbf-yang-guidelines.html#sec:bbf-11-multi-word-identifiers">BBF-11: Multi-word Identifiers</a></li>
      <li><a href="05-index-bbf-yang-guidelines.html#sec:bbf-12-acronyms-in-description-statements">BBF-12: Acronyms in Description Statements</a></li>
      <li><a href="05-index-bbf-yang-guidelines.html#sec:bbf-13-abbreviations-in-description-statements">BBF-13: Abbreviations in Description Statements</a></li>
      <li><a href="05-index-bbf-yang-guidelines.html#sec:bbf-14-adding-andor-creating-bbf-yang-models">BBF-14: Adding and/or Creating BBF YANG Models</a></li>
      <li><a href="05-index-bbf-yang-guidelines.html#sec:bbf-15-yang-model-revisions-and-license">BBF-15: YANG Model Revisions and License</a></li>
      <li><a href="05-index-bbf-yang-guidelines.html#sec:bbf-16-enum-naming">BBF-16: Enum Naming</a></li>
      <li><a href="05-index-bbf-yang-guidelines.html#sec:bbf-17-value-statements">BBF-17: Value Statements</a></li>
      <li><a href="05-index-bbf-yang-guidelines.html#sec:bbf-18-prefix-on-if-feature-statements">BBF-18: Prefix on &lsquo;if-feature&rsquo; Statements</a></li>
      <li><a href="05-index-bbf-yang-guidelines.html#sec:bbf-19-default-case-of-a-choice-statement---empty-typed-leaf">BBF-19: Default Case of a Choice Statement - Empty Typed Leaf</a></li>
      <li><a href="05-index-bbf-yang-guidelines.html#sec:bbf-20-formatting-error-string-statements">BBF-20: Formatting &lsquo;error-string&rsquo; statements</a></li>
    </ul>
    <li><a href="06-index-bbf-deviation-guidelines.html#sec:bbf-deviation-guidelines">BBF Deviation Guidelines</a></li>
    <ul>
      <li><a href="06-index-bbf-deviation-guidelines.html#sec:types-of-deviations">Types of Deviations</a></li>
      <li><a href="06-index-bbf-deviation-guidelines.html#sec:dev-1-not-supported">DEV-1: not-supported</a></li>
      <li><a href="06-index-bbf-deviation-guidelines.html#sec:dev-2-add---number-of-elements">DEV-2: add - Number of Elements</a></li>
      <li><a href="06-index-bbf-deviation-guidelines.html#sec:dev-3-add---must-constraints">DEV-3: add - &lsquo;must&rsquo; Constraints</a></li>
      <li><a href="06-index-bbf-deviation-guidelines.html#sec:dev-4-replace---data-type">DEV-4: replace - Data Type</a></li>
      <li><a href="06-index-bbf-deviation-guidelines.html#sec:dev-5-replace---number-of-elements">DEV-5: replace - Number of Elements</a></li>
      <li><a href="06-index-bbf-deviation-guidelines.html#sec:dev-6-delete">DEV-6: delete</a></li>
    </ul>
  </ul>
</ul>
</nav>

    <header id="title-block-header">
      <h1 class="title" id="sec:bbf-deviation-guidelines">BBF Deviation
Guidelines<a href="#sec:bbf-deviation-guidelines" class="headerlink" title="Permalink to this header"> <img src="permalink.png" style="width: 0.8em"/></a></h1>
    </header>
    <nav id="_TOC" role="doc-toc">
<ul>
<li><a href="#sec:types-of-deviations"
id="toc-sec:types-of-deviations">Types of Deviations <img
src="permalink.png" style="width:0.8em" /></a></li>
<li><a href="#sec:dev-1-not-supported"
id="toc-sec:dev-1-not-supported">DEV-1: not-supported <img
src="permalink.png" style="width:0.8em" /></a></li>
<li><a href="#sec:dev-2-add---number-of-elements"
id="toc-sec:dev-2-add---number-of-elements">DEV-2: add - Number of
Elements <img src="permalink.png" style="width:0.8em" /></a></li>
<li><a href="#sec:dev-3-add---must-constraints"
id="toc-sec:dev-3-add---must-constraints">DEV-3: add - ‘must’
Constraints <img src="permalink.png" style="width:0.8em" /></a></li>
<li><a href="#sec:dev-4-replace---data-type"
id="toc-sec:dev-4-replace---data-type">DEV-4: replace - Data Type <img
src="permalink.png" style="width:0.8em" /></a></li>
<li><a href="#sec:dev-5-replace---number-of-elements"
id="toc-sec:dev-5-replace---number-of-elements">DEV-5: replace - Number
of Elements <img src="permalink.png" style="width:0.8em" /></a></li>
<li><a href="#sec:dev-6-delete" id="toc-sec:dev-6-delete">DEV-6: delete
<img src="permalink.png" style="width:0.8em" /></a></li>
</ul>
    </nav>
<p>It is understood that there are times in which a device will need to
support a subset of a standard YANG model whether it be from BBF or any
other SDO. YANG provides a means to explicitly model this subset of
support via a deviation. While a deviation allows for almost any change
in the original definition, it is important that implementations only
allow those deviations which are truly a subset of the original and that
do not cause the device to violate the underlying specification on which
the YANG model is based. The following sections describe the types of
deviations and the guidelines by which they are expected to be used in
the Broadband Forum.</p>
<h3 id="sec:types-of-deviations">Types of Deviations <a
href="06-index-bbf-deviation-guidelines.html#sec:types-of-deviations"
class="headerlink" title="Permalink to this header"><img
src="permalink.png" style="width:0.8em" /></a></h3>
<p>The YANG <em>deviate</em> statement is used to define the manner in
which the server deviates from a particular YANG module. There are 4
types of deviations defined as arguments to the deviate statement:</p>
<ul>
<li>not-supported
<ul>
<li>Indicates the target node is not implemented by the server.</li>
</ul></li>
<li>add
<ul>
<li>Adds properties to the target node so long as they do not already
exist.</li>
</ul></li>
<li>replace
<ul>
<li>Replaces properties of the target node so long as they already
exist.</li>
</ul></li>
<li>delete
<ul>
<li>Deletes existing properties of the target node.</li>
</ul></li>
</ul>
<h3 id="sec:dev-1-not-supported">DEV-1: not-supported <a
href="06-index-bbf-deviation-guidelines.html#sec:dev-1-not-supported"
class="headerlink" title="Permalink to this header"><img
src="permalink.png" style="width:0.8em" /></a></h3>
<p>The deviate <em>not-supported</em> argument MAY be used to announce
lack of support for an optional node.</p>
<p>An optional node is one which does not have a default value nor is
made mandatory by use of the mandatory statement. Consider the following
object definition which is defined with neither a default value nor a
mandatory statement.</p>
<pre><code>  leaf error-threshold {
    type uint32;
    description
      &quot;The number of errors, when exceeded, will raise an alarm.&quot;;
  }</code></pre>
<p>Since this node is optional, it is acceptable to announce the object
as not supported.</p>
<pre><code>  deviation error-threshold {
    description
      &quot;The optional error threshold is not supported.&quot;;
    deviate not-supported;
  }    </code></pre>
<h3 id="sec:dev-2-add---number-of-elements">DEV-2: add - Number of
Elements <a
href="06-index-bbf-deviation-guidelines.html#sec:dev-2-add---number-of-elements"
class="headerlink" title="Permalink to this header"><img
src="permalink.png" style="width:0.8em" /></a></h3>
<p>The deviate <em>add</em> argument MAY be used to add a restriction on
the number of elements in a <em>leaf-list</em> or <em>list</em>.</p>
<p>Adding a restriction on the number of elements is accomplished by
adding a <em>min-elements</em> and/or <em>max-elements</em> statement
where they were not previously defined. For example, you have a
<em>leaf-list</em> which does not contain either a <em>min-elements</em>
or <em>max-elements</em> statement and thus does not impose any limit on
the number of elements contained in the <em>leaf-list</em>.</p>
<pre><code>  leaf-list port {
    type string;
    description
      &quot;A port associated with a port group.&quot;;
  }</code></pre>
<p>A particular implementation may want to limit the number to 4. In
this case, a deviation can be used to add the <em>max-elements</em>
statement to the definition.</p>
<pre><code>  deviation port {
    description
      &quot;Limit the maximum number of ports to 4.&quot;;
    deviate add {
      max-elements 4;
    }
  }</code></pre>
<h3 id="sec:dev-3-add---must-constraints">DEV-3: add - ‘must’
Constraints <a
href="06-index-bbf-deviation-guidelines.html#sec:dev-3-add---must-constraints"
class="headerlink" title="Permalink to this header"><img
src="permalink.png" style="width:0.8em" /></a></h3>
<p>The deviate <em>add</em> argument MAY be used to add a constraint on
valid data by the use of the must statement.</p>
<p>This constraint may be necessary depending on actual hardware in use.
For example, the number of physical interfaces of a particular type will
be limited by the number present on the hardware. For this, we could add
a constraint on the interface list in <em>ietf-interfaces <span
class="cite" data-citation-ids="RFC7223"><a
href="01-index-references.html#ref-RFC7223">[1]</a></span></em> to
explicitly announce how many interfaces are supported.</p>
<pre><code>  deviation &quot;/if:interfaces&quot; {
    description
      &quot;There are only 8 G.fast interfaces supported.&quot;;
    deviate add {
      must &quot;count(interface[type=&#39;ianaift:gfast&#39;])=8&quot;;
    }
  }</code></pre>
<h3 id="sec:dev-4-replace---data-type">DEV-4: replace - Data Type <a
href="06-index-bbf-deviation-guidelines.html#sec:dev-4-replace---data-type"
class="headerlink" title="Permalink to this header"><img
src="permalink.png" style="width:0.8em" /></a></h3>
<p>The deviate <em>replace</em> argument MAY be used to replace a type
so long as the replacement type uses the same underlying built-in YANG
type and the value represented does not fall outside the range of the
definition of the type being replaced.</p>
<p>An integer type can be replaced as long as the replacement uses the
same built-in YANG type, e.g. uint32 or int64 and that the range
specified falls within the range of the original definition. If the
original does not define a range then any range can be specified in the
deviation. If the original defines a range of values, the range of the
deviation must fall within this defined range. In other words the new
minimum value must be greater than or equal to the original and the new
maximum value must be less than or equal to the original. For example,
the following defines an object of type uint32 with a range of values 1
to 999999.</p>
<pre><code>  leaf error-threshold {
    type uint32 {
      range &quot;1..999999&quot;;
    }
    description
      &quot;The number of errors, when exceeded, will raise an alarm.&quot;;
  }</code></pre>
<p>A particular implementation may only allow a range from 10 to 99999.
Since this range is a subset of the original range definition, we can
replace the uint32 type with another uint32 type that has the new
range.</p>
<pre><code>  deviation error-threshold {
    description
      &quot;The supported range of values is 10 to 99999.&quot;;
    deviate replace {
      type uint32 {
        range &quot;10..99999&quot;;
      }
    }
  }</code></pre>
<p>A string type can be replaced as long as its replacement is also a
string and any specified length or pattern is valid per the original
definition. If no length is specified in the original, this means that
any length restriction may be added. If a length is specified, it means
the new length can be specified so long as the new minimum value is
greater than or equal to the original and the new maximum value is less
than or equal to the original. If no pattern is specified in the
original, any pattern may be added. If a pattern is specified in the
original, the new pattern must be equal to or a subset of the original.
For example, the following object is defined as a string with no length
restriction and a pattern which allows for any alphanumeric
character.</p>
<pre><code>  leaf name {
    type string {
      pattern &#39;[A-Za-z0-9]*&#39;;
    }
    description
      &quot;The name of a thing.&quot;;
  }</code></pre>
<p>A particular implementation may require that the maximum length of
the string be 255 characters and that upper case characters are not
supported. This is a valid deviation since the new string is shorter
than the original and the character set is a subset of the original
pattern.</p>
<pre><code>  deviation name {
    description
      &quot;The name may be no more than 255 lowercase letters and/or
       numbers.&quot;;
    deviate replace {
      type string {
        length &quot;0..255&quot;;
        pattern &#39;[a-z0-9]*&#39;;
      }
    }
  }</code></pre>
<h3 id="sec:dev-5-replace---number-of-elements">DEV-5: replace - Number
of Elements <a
href="06-index-bbf-deviation-guidelines.html#sec:dev-5-replace---number-of-elements"
class="headerlink" title="Permalink to this header"><img
src="permalink.png" style="width:0.8em" /></a></h3>
<p>The deviate <em>replace</em> argument MAY be used to further restrict
the number of elements in a <em>list</em> or <em>leaf-list</em>.</p>
<p>For <em>min-elements</em>, the new value must be greater than or
equal to the original. For <em>max-elements</em>, the new value must be
less than or equal to the original. Suppose we have the following
definition of a <em>leaf-list</em> of ports which must have at least 1
and no more 10 entries.</p>
<pre><code>  leaf-list port {
    min-elements 1;
    max-elements 10;
    type string;
    description
      &quot;A port associated with a port group.&quot;;
  }</code></pre>
<p>Now we have an implementation which must have at least 2 ports but no
more than 4 ports configured. Since this falls within the constraints of
the original definition, it is a valid deviation.</p>
<pre><code>  deviation port {
    description
      &quot;Specify that at least 2 but no more than 4 ports can be
       configured.&quot;;
    deviate replace {
      min-elements 2;
      max-elements 4;
    }
  }</code></pre>
<h3 id="sec:dev-6-delete">DEV-6: delete <a
href="06-index-bbf-deviation-guidelines.html#sec:dev-6-delete"
class="headerlink" title="Permalink to this header"><img
src="permalink.png" style="width:0.8em" /></a></h3>
<p>The deviate <em>delete</em> argument MUST NOT be used in a
deviation.</p>
<p>By deleting a property, the value space of an object is typically
being expanded which means the value accepted by the deviated definition
is not valid per the original definition and thus, should never be
allowed.</p>
    <div style="clear: both;"/>
    <footer class="site-footer">
<nav>
<p>
   <a href="00-index-contents.html#contents">Cover Page</a>
 | <a href="01-index-references.html#sec:references">References</a>
 | <a href="02-index-overview.html#sec:overview">Overview</a>
 | <a href="03-index-yang-guidelines.html#sec:yang-guidelines">YANG Guidelines</a>
 | <a href="04-index-ietf-yang-guidelines.html#sec:ietf-yang-guidelines">IETF YANG Guidelines</a>
 | <a href="05-index-bbf-yang-guidelines.html#sec:bbf-yang-guidelines">BBF YANG Guidelines</a>
 | <a href="06-index-bbf-deviation-guidelines.html#sec:bbf-deviation-guidelines">BBF Deviation Guidelines</a>
</p>
</nav>

      <span class="site-footer-owner">
        OD-360 is developed and maintained
        by <a href="https://www.broadband-forum.org">The Broadband Forum</a>.
        &copy; The Broadband Forum 2022</a>. All Rights Reserved.
      </span>
      <span class="site-footer-credits">
        This page was generated by <a href="https://pandoc.org">pandoc</a>
        and <a href="https://pages.github.com">GitHub Pages</a>.
        View the <a href="https://github.com/BroadbandForum/yang">Broadband
Forum YANG Modules on GitHub</a>.
        <span class="release"/>
      </span>
    </footer>
  </section>
</body>
</html>
